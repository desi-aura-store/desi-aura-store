<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <title>Store — Home</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <header>
  <h1>Desi Aura</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="cart.html">Cart <span id="cart-count" class="cart-count">0</span></a>

  
  </nav>
</header>
  <main>
    <section class="hero">
  <h2>Welcome to Desi Aura</h2>
  <p>Authentic clothing & accessories that reflect your style</p>
</section>
 <section class="products" id="featured-products">
    <!-- 3 products will load here via JS -->
  </section>
  <div class="center-btn">
    <a href="shop.html"><button>View All Products</button></a>
  </div>
    <div id="products"></div>
  </main>
  <script src="assets/js/config.js"></script>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/cart.js"></script>
  <script src="assets/js/product-ui.js" defer></script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const featured = document.getElementById("featured-products");
  featured.innerHTML = '';

  try {
    const res = await fetch(`${window.API_BASE_URL}/products?limit=3&offset=0`, { cache: 'no-store' });
    if (!res.ok) throw new Error('Failed fetching featured products: ' + res.status);
    const products = await res.json();

    if (!Array.isArray(products) || products.length === 0) {
      featured.innerHTML = '<p class="empty-message">No featured products.</p>';
      return;
    }

    products.forEach(p => {
      const card = document.createElement('div');
      card.className = 'product-card fade-in';
      card.innerHTML = `
        <div class="image-wrap">
          <a class="product-link" href="product.html?id=${p.id}" aria-label="${p.name}">
            <img src="/images/${ firstImage(p) }" alt="${p.name}">
          </a>
          <div class="actions">
            <button class="add-btn" data-id="${p.id}" data-name="${encodeURIComponent(p.name)}" data-price="${p.price}">Add to cart</button>
            <button class="buy-btn" data-id="${p.id}" data-name="${encodeURIComponent(p.name)}" data-price="${p.price}">Buy now</button>
          </div>
        </div>
        <div class="product-info">
          <h3>${p.name}</h3>
          <p>₹${p.price}</p>
        </div>
      `;
      featured.appendChild(card);
    });

  } catch (err) {
    console.error(err);
    featured.innerHTML = '<p class="empty-message">Failed to load featured products.</p>';
  }
});
</script>



  <footer>
  <p>&copy; 2025 Desi Aura. All rights reserved.</p>
</footer>

</body>
</html>
